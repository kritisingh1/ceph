{% extends "base.html" %}

{% block content %}

<script>
        $(document).ready(function(){
            // Pre-populated initial data at page load
            var content_data = {{ content_data }};

            var refresh = function() {
                $.get("{{ url_prefix }}/mon/list_data/", function(data) {
                    content_data.mons_by_server = data;
                    $('.inlinesparkline').sparkline();
                    setTimeout(refresh, 5000);
                });
            };

            rivets.formatters.colored_up_in = function(mon){
                var result = "";
                if (mon.up) {
                    result += "<span style='color:#00bb00;'>up</span>";
                } else {
                    result += "<span style='color:#bb0000;'>down</span>";
                }

                result += ", ";

                if (mon.in) {
                    result += "<span style='color:#00bb00;'>in</span>";
                } else {
                    result += "<span style='color:#bb0000;'>out</span>";
                }

                return result;
            };

            rivets.formatters.sparkline_data = function(time_series) {
                result = "";
                for (var i = 1; i < time_series.length; ++i) {
                    var delta_v = time_series[i][1] - time_series[i - 1][1];
                    var delta_t = time_series[i][0] - time_series[i - 1][0];
                    result += (delta_v / delta_t + ",");
                }
                return result;
            };

            rivets.bind($("div#content"), content_data);
            $('.inlinesparkline').sparkline();
            setTimeout(refresh, 5000);
        });
</script>

<section class="content-header">
    <h1>
        monitor daemons
    </h1>
</section>

<section class="content">
    <div class="box">
        <div class="box-body">

            <table class="table table-condensed table-bordered">
            <thead>
            <tr>
                <th>Election Epoch</th>
                <th colspan="4">Features</th>
                <th>Outside Quorum</th>
                <th>Rank</th>
                <th>Name</th>
                <th colspan="10">MonMap</th>
                <th>State</th>
                <th>Extra Probe Peers</th>
                <th colspan="9">Feature Map</th>
                <th>Quorum</th>
                <th>Sync Provider</th>
            </tr>
            </thead>

           <!--  <tbody rv-each-server="mons_by_server">
                <tr rv-each-mon="server.1">
                    <td rv-if="mon.first" rv-rowspan="server.1 | length">{server.0}</td>
                    <td><a rv-href="mon.url">{mon.id}</a></td>
                    <td rv-html="mon | colored_up_in"></td>
                    <td>{mon.stats.numpg}</td>
                    <td>{mon.stats.stat_bytes_used | dimless_binary} / {mon.stats.stat_bytes | dimless_binary}</td>
                    <td>{mon.stats.op_out_bytes | dimless_binary}/s <span class="inlinesparkline" rv-html="mon.stats_history.op_out_bytes | sparkline_data"></span></td>
                    <td>{mon.stats.op_in_bytes | dimless_binary}/s <span class="inlinesparkline" rv-html="mon.stats_history.op_in_bytes | sparkline_data"></span></td>
                    <td>{mon.stats.op_r | dimless}/s</td>
                    <td>{mon.stats.op_w | dimless}/s</td>
                </tr>
            </tbody> -->
            <tbody>
            <tr>
                <td rowspan="5">3</td>
                <th>quorum_con</th>
                <th>quorum_mon</th>
                <th>required_mon</th>
                <th>required_con</th>
                <td rowspan="5">0</td>
                <td rowspan="5">0</td>
                <th colspan="2">Features</th>
                <th>Created</th>
                <th>Modified</th>
                <th>Epoch</th>
                <th colspan="4">Monitors</th>
                <th>FSID</th>
                <th>Leader</th>
                <th>None</th>
                <th colspan="3">Client</th>
                <th colspan="3">Mon</th>
                <th colspan="3">OSD</th>
                <td rowspan="5">0</td>
                <td rowspan="5">None</td>
                <td rowspan="5">a</td>

            </tr>

            <tr>
                <td rowspan="4">2305244844800671739</td>
                <td>Kraken</td>
                <td>Kraken</td>
                <td rowspan="4">153140804420911104</td>
                <th>Optional</th>
                <th colspan="3">Persistent</th>
                <td rowspan="4">2017-10-19 15:11:17.767955</td>
                <td rowspan="4">2017-10-19 15:11:17.767955</td>
                <td rowspan="4">1</td>
                <th>Public Address</th>
                <th>Name</th>
                <th>Rank</th>
                <th>Address</th>
                <td rowspan="4">1845fe1b-68d1-4c7e-b30b-bacc9961e197</td>
                <th colspan="3">Group</th>
                <th colspan="3">Group</th>
                <th colspan="3">Group</th>
            </tr>

            <tr>
                <td>Luminous</td>
                <td>Luminous</td>
                <td>Kraken</td>
                <td rowspan="3">127.0.0.1:40000/0</td>
                <td rowspan="3">a</td>
                <td rowspan="3">0</td>
                <td rowspan="3">127.0.0.1:40000/0"</td>
                <th>Release</th>
                <th>Num</th>
                <th>Features</th>
                <th>Relaease</th>
                <th>Num</th>
                <th>Features</th>
                <th>Release</th>
                <th>Num</th>
                <th>Features</th>

            </tr>

            <tr>
                <td rowspan="2">Mimic</td>
                <td rowspan="2">Mimic</td>
                <td>Luminous</td>
                <td>Luminous</td>
                <td>3</td>
                <td rowspan="2">0x1ffddff8fea4fffb</td>
                <td>Luminous</td>
                <td>1</td>
                <td rowspan="2">0x1ffddff8fea4fffb</td>
                <td>Lumninous</td>
                <td>3</td>
                <td rowspan="2">0x1ffddff8fea4fffb</td>

            </tr>

            <tr>
                <td>Mimic</td>
            </tr>

            </tbody>


            </table>




        </div>
    </div>


</section>
<!-- /.content -->

{% endblock %}